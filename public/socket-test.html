<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Socket.IO í…ŒìŠ¤íŠ¸</title>
  <!-- CDNìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ë¡œë“œ -->
  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
  <!-- ë¹ˆ íŒŒë¹„ì½˜ -->
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>
<body>
  <h1>Socket.IO í…ŒìŠ¤íŠ¸</h1>
  <pre id="log"></pre>
  <script>
    const logEl = document.getElementById('log');
    const log = msg => { logEl.textContent += msg + "\n"; console.log(msg); };

    // ì‹¤ì œ ë°œê¸‰ëœ JWT: "Bearer " í¬í•¨
    const token = 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjp7InVzZXJJZCI6IjEiLCJ0eXBlIjoiUlQiLCJpc3N1ZXIiOiJDYXA0U2VydmVyIn0sImlhdCI6MTc0ODQ5NzA2NiwiZXhwIjoxNzQ4NTExNDY2fQ.GJobfkH-wtOspuHT9WPYpI8G1SWVIfX_kLOMDhFS_qM';

    const socket = io('http://localhost:3000', {
      auth:    { token },
      transports: ['polling', 'websocket']
    });

    socket.on('connect', () => {
      log(`âœ… Connected: ${socket.id}`);
      socket.emit('joinRoom', { roomId: '1' });
      log('â†’ joinRoom');
      socket.emit('sendMessage', {
        roomId: '1', side: 'A', message: 'ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€!'
      });
      log('â†’ sendMessage');
    });

    socket.on('newMessage', msg => {
      log(`ğŸ†• newMessage â†’ ${JSON.stringify(msg)}`);
    });

    socket.on('connect_error', err => {
      log(`âŒ connect_error â†’ ${err.message}`);
    });
  </script>
</body>
</html>
